import {Injectable } from '@angular/core';
import {BaseApiClass} from '../shared/api.base';
import { Appconstants } from '../app.constant';
import { DataService } from '../shared/service.helper';
import {  Headers } from '@angular/http';
@Injectable()
export class RoleService {
    baseApi: BaseApiClass;

   constructor(private dataService: DataService) {

   }
   roleCreate(roleObject) {
    const headers = new Headers();
    headers.append('Content-Type', 'application/json');
    const url = Appconstants.API_BASE_URL + Appconstants.ROLE;
    roleObject.statusApp = roleObject.statusapp ? 1 : 0;
    roleObject.statusWrkfl = roleObject.statusWrkfl ? 1 : 0;
    console.log(roleObject);
    return new Promise((resolve) => {
        this.dataService.requestPost(url, roleObject,  headers ).subscribe((data) => {
          this.baseApi = data;
          resolve(this.baseApi);
        });
      });
   }

   fetchRoles(roleObject) {
    const headers = new Headers();
    headers.append('Content-Type', 'application/json');
    const url = Appconstants.API_BASE_URL + Appconstants.FETCHROLES;
    // roleObject.statusApp=roleObject.statusapp?1:0;
    // roleObject.statusWrkfl=roleObject.statusWrkfl?1:0;
    console.log(roleObject);
    return new Promise((resolve) => {
        this.dataService.requestPost(url, roleObject, headers).subscribe((data) => {
         this.baseApi = data;
         // console.log("inside service-->"+data)
          resolve(this.baseApi);
        });
      });
   }

}
